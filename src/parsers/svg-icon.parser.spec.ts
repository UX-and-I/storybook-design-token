import { SvgIconParser } from './svg-icon.parser';

const TEST_FILES = {
  ICON_1:
    '<?xml version="1.0" encoding="UTF-8"?> <svg data-token-name="check" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <path d="M9.35221912,16.3536125 L19.5004166,5.34255149 C19.9029667,4.90884428 20.5808871,4.88358644 21.0145944,5.28613652 C21.4483016,5.6886866 21.4735594,6.36660707 21.0710093,6.80031428 L10.1375155,18.6574532 C9.71359736,19.1141823 8.99084087,19.1141823 8.56692275,18.6574532 L3.28613652,12.890538 C2.88358644,12.4568308 2.90884428,11.7789103 3.34255149,11.3763602 C3.77625869,10.9738101 4.45417917,10.999068 4.85672925,11.4327752 L9.35221912,16.3536125 Z" fill="currentColor"></path> </svg>',
  ICON_2:
    '<?xml version="1.0" encoding="UTF-8"?> <svg data-token-name="delete" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <path d="M13.9,19.6153846 C14.3406977,19.6153846 14.7030233,19.2268791 14.7134884,18.7665714 L14.95,8.32817582 C14.9604651,7.86085714 14.6048837,7.46751648 14.1553488,7.45663736 C13.6988372,7.44962637 13.3330233,7.81250549 13.3225581,8.27958242 L13.0860465,18.7281319 C13.0753488,19.1952088 13.4309302,19.6153846 13.8804651,19.6153846 L13.9,19.6153846 Z M10.0644186,19.6153846 L10.0839535,19.6153846 C10.5334884,19.6153846 10.8890698,19.165956 10.8786047,18.6986374 L10.642093,8.24646154 C10.6313953,7.77914286 10.2627907,7.39740659 9.80906977,7.4078022 C9.35976744,7.41868132 9.00395349,7.79993407 9.01465116,8.26725275 L9.25116279,18.7416703 C9.26162791,19.201978 9.62372093,19.6153846 10.0644186,19.6153846 L10.0644186,19.6153846 Z M9.6744186,3.9010989 L14.3255814,3.9010989 L14.3255814,2.69230769 L9.6744186,2.69230769 L9.6744186,3.9010989 Z M22,4.86813187 C22,5.40217582 21.5834884,5.83516484 21.0697674,5.83516484 L2.93023256,5.83516484 C2.41651163,5.83516484 2,5.40217582 2,4.86813187 C2,4.33408791 2.41651163,3.9010989 2.93023256,3.9010989 L8.04651163,3.9010989 L8.04651163,1.72527473 C8.04651163,1.25795604 8.34627907,1 8.79581395,1 L15.2039535,1 C15.6534884,1 15.9534884,1.25795604 15.9534884,1.72527473 L15.9534884,3.9010989 L21.0697674,3.9010989 C21.5834884,3.9010989 22,4.33408791 22,4.86813187 L22,4.86813187 Z M19.534186,8.10479121 L18.824186,22.083978 C18.7981395,22.5974725 18.39,23 17.8953488,23 L6.10465116,23 C5.61,23 5.20186047,22.5974725 5.17581395,22.083978 L4.46604651,8.10479121 C4.43883721,7.57147253 4.8327907,7.11624176 5.34581395,7.0881978 C5.86139535,7.06232967 6.29697674,7.46969231 6.32395349,8.00276923 L6.9872093,21.0659341 L17.0127907,21.0659341 L17.6760465,8.00276923 C17.7032558,7.46945055 18.144186,7.06402198 18.654186,7.0881978 C19.1672093,7.11624176 19.5611628,7.57147253 19.534186,8.10479121 L19.534186,8.10479121 Z" fill="currentColor"> </path> </svg>'
};

describe('SvgIconParser', () => {
  let parser: SvgIconParser;

  beforeEach(() => {
    parser = new SvgIconParser();
  });

  it('should parse empty token file list', () => {
    expect(parser.parse({ svgIcons: [] })).toEqual({
      keyframes: '',
      tokenGroups: [
        {
          label: 'Icons',
          presenter: 'Svg',
          tokens: []
        }
      ]
    });
  });

  it('should parse svg files', () => {
    expect(
      parser.parse({
        svgIcons: [
          { filename: 'icon1.svg', content: TEST_FILES.ICON_1 },
          { filename: 'icon2.svg', content: TEST_FILES.ICON_2 }
        ]
      })
    ).toEqual({
      keyframes: '',
      tokenGroups: [
        {
          label: 'Icons',
          presenter: 'Svg',
          tokens: [
            {
              key: 'check',
              value: TEST_FILES.ICON_1
            },
            {
              key: 'delete',
              value: TEST_FILES.ICON_2
            }
          ]
        }
      ]
    });
  });
});
